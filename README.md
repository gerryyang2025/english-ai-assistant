# 英语单词记忆网站

专为英语学习者设计的英语单词学习助手，帮助轻松记忆英语单词。

## 📖 项目介绍

本系统是一个交互式英语单词学习网站，通过闪卡测试、进度追踪、AI 助手等多种方式，帮助更高效地记忆英语单词。网站支持根据教材单元组织单词内容，提供灵活的测试模式，并具备简洁友好的用户界面。

## 🎯 主要功能

### 1. 单词列表浏览
- **按词书单元查看**：支持切换查看不同词书的单元单词内容
- **分页显示**：单词列表分页展示，每页 20 个单词
- **搜索功能**：支持中英文搜索，快速找到目标单词
- **详细信息**：每个单词包含音标、中文含义、例句和记忆技巧
- **发音功能**：点击国旗图标播放单词发音，支持英式（🇬🇧）和美式（🇺🇸）发音
- **收藏功能**：可以收藏喜欢的单词，方便复习

### 2. 闪卡测试
- **词书单元选择**：支持独立选择词书和单元进行测试
- **三种测试模式**：
  - 英文 → 中文：看英文说中文含义
  - 中文 → 英文：看中文说英文单词
  - 混合模式：随机切换以上两种方式
- **翻转闪卡**：点击"查看答案"按钮，卡片翻转显示答案
- **掌握记录**：回答后点击"记住了"或"没记住"记录掌握情况
- **稍后复习**：可以将困难单词标记为稍后复习
- **进度显示**：实时显示当前测试进度
- **来源信息**：显示单词所属词书和单元，方便回溯

### 3. AI 智能助手
- **智能问答**：解答单词用法、语法规则等复杂问题
- **Markdown 格式**：支持 Markdown 格式展示回复，结构清晰
- **保护 API Key**：后端代理调用，保护 API Key 不暴露
- **速率限制**：防止恶意高频调用（20 次/小时）

### 4. 学习进度追踪
- **今日统计**：显示今日学习单词数、正确率和连续学习天数
- **单元进度**：查看每个单元的学习进度
- **总体统计**：显示总单词数、已掌握单词数、总体正确率
- **错词本**：自动记录错误次数多的单词，方便重点复习
- **掌握程度**：按掌握程度分类显示（已掌握、待复习、学习中）
- **连续天数**：记录连续学习天数，鼓励坚持学习

### 5. 每日一笑
- **随机笑话**：首页显示每日随机英文笑话
- **趣味学习**：增加学习过程的趣味性
- **智能隐藏**：获取失败时自动隐藏，不影响使用

### 6. 服务健康检查
- **自动检测**：页面加载时自动检测后端服务状态
- **友好提示**：服务不可用时显示全屏错误提示
- **快速恢复**：提供刷新按钮方便重新加载

### 7. 数据持久化
- **本地存储**：学习进度保存在浏览器本地存储中
- **隐私安全**：数据仅存储在本地，不上传到服务器
- **跨会话**：关闭浏览器后重新打开，进度数据仍然保留

### 8. 工具页面
- **Markdown 转 JSON**：上传 WORDS.md 或 READINGS.md 文件转换为 JSON 格式
- **JSON 上传实时生效**：上传 JSON 文件后立即应用更改，无需重启服务器
- **数据预览**：上传后可以预览数据内容，确保格式正确
- **安全检查**：上传文件类型验证、内容安全扫描

### 9. 格式检查工具
- **单词格式检查**：`python3 check-words-format.py` - 验证 WORDS.md 格式
- **阅读格式检查**：`python3 check-readings-format.py` - 验证 READINGS.md 格式

## 📁 文件结构

```
english-ai-assistant/
├── index.html              # 主页面
├── server.py               # Python Flask 后端服务器
├── run.sh                  # 服务器管理脚本
├── api_config.py           # API 配置文件（忽略版本控制）
├── api_config.example.py   # API 配置模板
├── README.md               # 本文档
├── DESIGN.md               # 详细设计文档
├── PROPOSAL.md             # 项目提案文档
├── TODO.md                 # 待办事项
├── .gitignore              # Git 忽略配置
├── .gitattributes          # Git 属性配置
├── css/
│   ├── main.css            # 主样式文件（包含完整响应式设计）
│   └── readings.css        # 阅读页面样式
├── js/
│   └── app.js              # 应用程序（含健康检查、笑话加载、工具页面）
├── data/
│   ├── words.json          # 单词数据文件
│   └── readings.json       # 阅读数据文件
├── tools/
│   └── update-tool.html    # 数据更新工具（支持 Markdown 和 JSON 上传）
├── WORDS.md                # 原始单词数据
├── READINGS.md             # 原始阅读数据
├── convert-words.js        # 单词数据转换脚本（Node.js）
├── convert-readings.js     # 阅读数据转换脚本（Node.js）
├── check-words-format.py   # 单词数据格式检查工具（Python）
└── check-readings-format.py # 阅读数据格式检查工具（Python）
```

## 🚀 使用方法

### 快速启动

```bash
# 进入项目目录
cd /path/to/english-ai-assistant

# 安装依赖（首次运行）
./run.sh install

# 启动服务器
./run.sh start

# 浏览器访问 http://localhost:8082
```

### 服务器命令

| 命令 | 说明 |
|------|------|
| `./run.sh install` | 安装依赖（创建虚拟环境，安装 Flask、requests、Gunicorn） |
| `./run.sh start` | 启动服务器（默认端口 8082） |
| `./run.sh start prod` | 生产模式启动 |
| `./run.sh stop` | 停止服务器 |
| `./run.sh restart` | 重启服务器 |
| `./run.sh status` | 检查服务器运行状态 |

### 注意事项

- 需要 AI 功能时，先配置 `api_config.py` 中的 MiniMax API Key
- 无需 AI 功能时，可直接双击打开 `index.html` 使用基础功能
- **更新代码后**：建议先 `./run.sh restart` 重启服务器，然后使用 `Ctrl + Shift + R` (Windows/Linux) 或 `Cmd + Shift + R` (Mac) 强制刷新浏览器，清除缓存

### 浏览器缓存清除

如果页面显示异常或加载旧版本内容，可以尝试以下方法：

1. **强制刷新（不清除缓存）**
   - Windows/Linux: `Ctrl + Shift + R` 或 `Ctrl + F5`
   - Mac: `Cmd + Shift + R`

2. **完全清除缓存**
   - Chrome: `Ctrl + Shift + Delete` → 选择"缓存的图片和文件" → "清除数据"
   - Safari: `Cmd + ,` → 高级 → 勾选"显示开发菜单" → 开发 → 清空缓存
   - Firefox: `Ctrl + Shift + Delete` → 选择"缓存" → "清除"

3. **开发者工具强制刷新**
   - 打开开发者工具 (`F12`)
   - 右键点击刷新按钮 → 选择"清空缓存并硬性重新加载"

## 🔧 API 配置

### 配置 MiniMax API Key

AI 助手功能需要配置 MiniMax API Key：

1. **复制配置文件模板**
   ```bash
   cp api_config.example.py api_config.py
   ```

2. **编辑配置文件**
   ```bash
   nano api_config.py
   ```

   内容示例：
   ```python
   MINIMAX_API_KEY = 'your-api-key-here'
   ```

3. **获取 API Key**
   - 访问 [MiniMax 平台](https://platform.minimaxi.com)
   - 注册账号并创建 API Key
   - 将 API Key 填入 `api_config.py`

4. **重启服务器**
   ```bash
   ./run.sh restart
   ```

### 速率限制

AI 助手功能有以下限制：
- 每小时最多 20 次请求
- 连续请求间隔至少 5 秒
- 超限会返回 429 错误，提示等待时间

## 📚 单词数据

系统目前包含以下词书的单词内容：

### 英语五年级上册（12个单元，193个单词）

| 单元 | 主题 | 分类 | 单词数 |
|------|------|------|--------|
| Unit 1 | My future（我的未来） | 职业类 | 13 |
| Unit 2 | Going to school（上学交通） | 交通类 | 17 |
| Unit 3 | My birthday（生日序数词） | 序数词 | 40 |
| Unit 4 | Grandparents（频率副词） | 频率副词 | 8 |
| Unit 5 | Friends（朋友交流） | 日常交流类 | 18 |
| Unit 6 | Family life（家庭生活） | 房间类 | 16 |
| Unit 7 | At the beach（海滩度假） | 度假类 | 12 |
| Unit 8 | An outing（远足探险） | 远足探险类 | 13 |
| Unit 9 | Around the city（城市方向） | 方向类 | 13 |
| Unit 10 | Wind（风的副词） | 副词类 | 14 |
| Unit 11 | Water（水与自然） | 生活自然类 | 16 |
| Unit 12 | Fire（消防安全） | 安全类 | 13 |

### 英语六年级上册（1个单元，10个单词）

| 单元 | 主题 | 分类 | 单词数 |
|------|------|------|--------|
| Unit 1 | Growing up（成长变化） | 成长变化类 | 10 |

## 🔄 更新数据

当您修改了 `WORDS.md` 或 `READINGS.md` 文件后，需要将内容同步到网站数据：

### 方法一：使用在线工具（推荐）

1. **打开工具页面**
   - 在网站导航栏点击「工具」按钮
   - 或直接访问 `tools/update-tool.html`

2. **选择数据类型**
   - 「单词数据」：处理 WORDS.md 和 words.json
   - 「阅读数据」：处理 READINGS.md 和 readings.json

3. **上传文件**
   - **Markdown 上传**：上传 .md 文件，解析后生成 JSON
   - **JSON 上传（实时生效）**：上传 .json 文件，上传后立即生效

4. **验证数据**
   - 工具会自动预览数据内容
   - 检查格式是否正确

### 方法二：使用命令行工具

```bash
# 转换单词数据
node convert-words.js

# 转换阅读数据
python3 convert-readings.py

# 检查单词数据格式
python3 check-words-format.py

# 检查阅读数据格式
python3 check-readings-format.py
```

## 🎨 设计特点

- **友好的界面**：色彩柔和，适合儿童使用
- **大字体显示**：单词和内容采用大字体，方便阅读
- **动画效果**：闪卡翻转动画增加学习趣味性
- **响应式设计**：支持电脑、平板和手机等多种设备
- **操作简单**：按钮大且清晰，易于点击操作
- **AI 助手**：绿色/青色渐变主题，突出显示
- **每日笑话**：首页显示趣味英文笑话，增加学习乐趣
- **服务健康检测**：智能检测服务状态，友好提示不可用情况
- **阅读模块**：包含句型、知识点、对话和语音播放功能
- **工具页面**：支持 Markdown/JSON 转换、实时生效、格式检查
- **数据安全**：上传文件安全检查，防止恶意文件

## 🔧 技术实现

- **前端**：HTML5 + CSS3 + JavaScript（原生实现）
- **后端**：Python Flask（API 代理，保护 API Key）
- **AI 服务**：MiniMax API（通过后端代理调用）
- **外部 API**：Chuck Norris Jokes API（每日笑话）
- **CSS 动画**：流畅的动画效果（卡片翻转、页面切换）
- **Web Speech API**：浏览器内置语音合成（支持英式和美式发音）
- **localStorage**：本地数据持久化存储
- **速率限制**：防止 API 滥用（20 次/小时）
- **生产部署**：Gunicorn 支持高并发
- **服务健康检查**：前后端协同的健康检测机制
- **响应式设计**：完整的移动端适配（4个断点）
- **阅读模块**：句型高亮、知识点 Markdown 渲染、对话语音播放
- **工具页面**：在线数据转换、实时生效、格式验证
- **安全检查**：文件类型验证、内容安全扫描

## 📝 更新日志

| 版本 | 日期 | 说明 |
|------|------|------|
| v1.0 | 2026-01-18 | 初始版本，完成核心功能 |
| v2.0 | 2026-01-18 | 添加 Python 后端服务器、AI 助手、速率限制、Gunicorn 生产部署支持 |
| v2.1 | 2026-01-18 | 闪卡测试添加独立词书选择功能 |
| v2.2 | 2026-01-18 | 添加每日笑话功能（Chuck Norris API） |
| v2.3 | 2026-01-18 | 添加服务健康检查和错误提示界面 |
| v2.4 | 2026-01-18 | 完善移动端响应式设计（闪卡、单词列表、收藏、错词本） |
| v2.5 | 2026-01-20 | 添加阅读模块（阅读列表、详情页、语音播放、知识点展示） |
| v2.6 | 2026-01-20 | 添加工具页面（Markdown/JSON 转换、格式检查、实时生效） |
| v2.7 | 2026-01-20 | 添加移动端工具页面适配 |
| v2.8 | 2026-01-20 | 添加数据安全检查功能 |

## 📄 许可证

本项目仅供学习交流使用。

## 🤝 贡献

欢迎提出建议和改进意见！
